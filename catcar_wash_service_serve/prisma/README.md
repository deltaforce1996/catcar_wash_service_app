# Prisma + SQL Migration Guide

> р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╣Бр╕Ър╕Ър╣Ар╕Ыр╣Зр╕Щр╣Др╕Яр╕ер╣М **3 р╕Кр╕╕р╕Ф**: 1) Create base tables тЖТ 2) Create partitioned table(s) тЖТ 3) Create view
>
> р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕Зр╕Щр╕╡р╣Йр╣Гр╕Кр╣Й **PostgreSQL** р╣Бр╕ер╕░ **Prisma** (Node.js)

---

## тЬЕ Prerequisites

* Node.js 18+
* PostgreSQL 13+
* `psql` CLI (р╣Бр╕Щр╕░р╕Щр╕│)

```bash
npm i -D prisma
npm i @prisma/client
npx prisma init
```

р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓р╣Др╕Яр╕ер╣М `.env`

```env
DATABASE_URL="postgresql://user:password@localhost:5432/mydb?schema=public"
```

---

## ЁЯУБ р╣Вр╕Др╕гр╕Зр╕кр╕гр╣Йр╕▓р╕Зр╣Вр╕Ыр╕гр╣Ар╕Ир╕Бр╕Хр╣М (р╣Бр╕Щр╕░р╕Щр╕│)

```
project/
 тФЬтФА prisma/
 тФВ   тФЬтФА migrations/                 # р╣Вр╕Яр╕ер╣Ар╕Фр╕нр╕гр╣М migration р╕Вр╕нр╕З Prisma
 тФВ   тФЬтФА raw-sql/                    # р╣Ар╕Бр╣Зр╕Ъ SQL 3 р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щ
 тФВ   тФВ   тФЬтФА 01_create_tables.sql
 тФВ   тФВ   тФЬтФА 02_create_partitions.sql
 тФВ   тФВ   тФФтФА 03_create_views.sql
 тФВ   тФФтФА schema.prisma
 тФФтФА README.md
```

> р╣Ар╕гр╕▓р╕Ир╕░р╕Др╕╕р╕бр╕кр╕Др╕╡р╕бр╕▓р╕Фр╣Йр╕зр╕в **raw SQL** р╣Бр╕ер╣Йр╕зр╣Гр╕лр╣Й Prisma р╕гр╕╣р╣Йр╕Ир╕▒р╕Бр╣Ар╕Йр╕Юр╕▓р╕░ base tables/views р╕Ьр╣Ир╕▓р╕Щ `schema.prisma`

---

## 1) Create Base Tables тАФ `prisma/raw-sql/01_create_tables.sql`

```sql
-- Users & Events (р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕З)
CREATE TABLE IF NOT EXISTS users (
  id SERIAL PRIMARY KEY,
  email TEXT NOT NULL UNIQUE,
  created_at TIMESTAMP NOT NULL DEFAULT now()
);

CREATE TABLE IF NOT EXISTS events (
  id BIGSERIAL PRIMARY KEY,
  user_id INT NOT NULL REFERENCES users(id),
  amount NUMERIC(12,2) NOT NULL,
  event_type TEXT NOT NULL,
  created_at TIMESTAMP NOT NULL DEFAULT now()
);

-- р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Ыр╕гр╕░р╕кр╕┤р╕Чр╕Шр╕┤р╕ар╕▓р╕Ю
CREATE INDEX IF NOT EXISTS idx_events_created_at ON events (created_at);
CREATE INDEX IF NOT EXISTS idx_events_user_id ON events (user_id);
```

---

## 2) Create Partitioned Table тАФ `prisma/raw-sql/02_create_partitions.sql`

> Prisma р╕вр╕▒р╕Зр╣Др╕бр╣Ир╕гр╕нр╕Зр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╕Ыр╕гр╕░р╕Бр╕▓р╕и partition р╣Вр╕Фр╕вр╕Хр╕гр╕З р╣Ар╕гр╕▓р╕Ир╕░р╣Гр╕Кр╣Й **native SQL**

```sql
-- р╕Хр╕▓р╕гр╕▓р╕Зр╕лр╕ер╕▒р╕Бр╣Бр╕Ър╕Ъ Partitioned (р╕Хр╕▓р╕бр╕Кр╣Ир╕зр╕Зр╣Ар╕зр╕ер╕▓)
CREATE TABLE IF NOT EXISTS event_logs (
  id BIGSERIAL,
  user_id INT,
  amount NUMERIC(12,2),
  event_type TEXT,
  created_at TIMESTAMP NOT NULL,
  PRIMARY KEY (id, created_at)
) PARTITION BY RANGE (created_at);

-- р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕З: р╕кр╕гр╣Йр╕▓р╕Зр╕Юр╕▓р╕гр╣Мр╕Чр╕┤р╕Кр╕▒р╕Щр╕гр╕▓р╕вр╣Ар╕Фр╕╖р╕нр╕Щ (р╕кр╕┤р╕Зр╕лр╕▓р╕Др╕б 2025)
CREATE TABLE IF NOT EXISTS event_logs_2025_08
  PARTITION OF event_logs
  FOR VALUES FROM ('2025-08-01') TO ('2025-09-01');

-- р╕Фр╕▒р╕Кр╕Щр╕╡р╣Бр╕Щр╕░р╕Щр╕│ (р╕кр╕гр╣Йр╕▓р╕Зр╕Ър╕Щ parent р╕Цр╣Йр╕▓р╣Ар╕лр╕бр╕▓р╕░р╕кр╕б р╕лр╕гр╕╖р╕нр╣Бр╕Хр╣Ир╕ер╕░ partition р╕Хр╕▓р╕бр╣Ар╕Др╕к)
CREATE INDEX IF NOT EXISTS idx_event_logs_created_at ON event_logs (created_at);
CREATE INDEX IF NOT EXISTS idx_event_logs_user_id ON event_logs (user_id);
```

> р╣Ар╕Др╕ер╣Зр╕Фр╕ер╕▒р╕Ъ: р╣Ар╕Вр╕╡р╕вр╕Щр╕кр╕Др╕гр╕┤р╕Ыр╕Хр╣М SQL/PLpgSQL р╣Ар╕Юр╕╖р╣Ир╕нр╕кр╕гр╣Йр╕▓р╕Зр╕Юр╕▓р╕гр╣Мр╕Чр╕┤р╕Кр╕▒р╕Щр╕ер╣Ир╕зр╕Зр╕лр╕Щр╣Йр╕▓р╕Чр╕╕р╕Бр╣Ар╕Фр╕╖р╕нр╕Щ (optional)

```sql
-- р╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щр╕кр╕гр╣Йр╕▓р╕Зр╕Юр╕▓р╕гр╣Мр╕Чр╕┤р╕Кр╕▒р╕Щр╕гр╕▓р╕вр╣Ар╕Фр╕╖р╕нр╕Щр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤ (р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕З)
CREATE OR REPLACE FUNCTION ensure_event_logs_month(year int, month int) RETURNS void AS $$
DECLARE
  start_date date := make_date(year, month, 1);
  end_date   date := (make_date(year, month, 1) + interval '1 month');
  part_name  text := format('event_logs_%s_%s', year, to_char(start_date, 'MM'));
BEGIN
  EXECUTE format(
    'CREATE TABLE IF NOT EXISTS %I PARTITION OF event_logs FOR VALUES FROM (%L) TO (%L);',
    part_name, start_date, end_date
  );
END;
$$ LANGUAGE plpgsql;
```

р╣Гр╕Кр╣Йр╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щ:

```sql
SELECT ensure_event_logs_month(2025, 9);
```

---

## 3) Create Views тАФ `prisma/raw-sql/03_create_views.sql`

```sql
-- р╕бр╕╕р╕бр╕бр╕нр╕Зр╕вр╕нр╕Фр╕гр╕зр╕бр╕гр╕▓р╕вр╕зр╕▒р╕Щ
CREATE OR REPLACE VIEW daily_summary AS
SELECT
  DATE(created_at) AS day,
  COUNT(*) AS total_events,
  SUM(amount) AS total_amount
FROM event_logs
GROUP BY DATE(created_at)
ORDER BY day;

-- р╕бр╕╕р╕бр╕бр╕нр╕Зр╕вр╕нр╕Фр╕гр╕зр╕бр╕гр╕▓р╕вр╣Ар╕Фр╕╖р╕нр╕Щ
CREATE OR REPLACE VIEW monthly_summary AS
SELECT
  DATE_TRUNC('month', created_at) AS month,
  COUNT(*) AS total_events,
  SUM(amount) AS total_amount
FROM event_logs
GROUP BY DATE_TRUNC('month', created_at)
ORDER BY month;

-- (р╕Чр╕▓р╕Зр╣Ар╕ер╕╖р╕нр╕Б) Materialized View
-- CREATE MATERIALIZED VIEW mv_monthly_summary AS
-- SELECT DATE_TRUNC('month', created_at) AS month,
--        COUNT(*) AS total_events,
--        SUM(amount) AS total_amount
-- FROM event_logs
-- GROUP BY 1;
-- REFRESH MATERIALIZED VIEW CONCURRENTLY mv_monthly_summary;
```

---

## тЪЩя╕П Apply SQL (р╕кр╕нр╕Зр╕Чр╕▓р╕Зр╣Ар╕ер╕╖р╕нр╕Б)

### р╕Чр╕▓р╕Зр╣Ар╕ер╕╖р╕нр╕Б A: р╣Гр╕Кр╣Й `psql` р╕Хр╕гр╕З р╣Ж (р╕Зр╣Ир╕▓р╕вр╣Бр╕ер╕░р╕Кр╕▒р╕Фр╣Ар╕Ир╕Щ)

```bash
psql "$DATABASE_URL" -f prisma/raw-sql/01_create_tables.sql
psql "$DATABASE_URL" -f prisma/raw-sql/02_create_partitions.sql
psql "$DATABASE_URL" -f prisma/raw-sql/03_create_views.sql
```

### р╕Чр╕▓р╕Зр╣Ар╕ер╕╖р╕нр╕Б B: р╕гр╕зр╕бр╕Бр╕▒р╕Ъ Prisma Migrate (р╣Ар╕Бр╣Зр╕Ър╕Ыр╕гр╕░р╕зр╕▒р╕Хр╕┤р╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕З)

1. р╕кр╕гр╣Йр╕▓р╕З migration р╕зр╣Ир╕▓р╕З

```bash
npx prisma migrate dev --create-only --name init_base
```

2. р╣Ар╕Ыр╕┤р╕Фр╣Вр╕Яр╕ер╣Ар╕Фр╕нр╕гр╣Мр╕Чр╕╡р╣И Prisma р╕кр╕гр╣Йр╕▓р╕З р╣Ар╕Кр╣Ир╕Щ `prisma/migrations/20250829120000_init_base/` р╣Бр╕ер╣Йр╕зр╕зр╕▓р╕З SQL р╕Ир╕▓р╕Бр╣Др╕Яр╕ер╣М `01/02/03` р╕ер╕Зр╣Гр╕Щ `migration.sql` р╕Хр╕▓р╕бр╕ер╕│р╕Фр╕▒р╕Ър╕лр╕гр╕╖р╕нр╣Бр╕вр╕Бр╣Ар╕Ыр╣Зр╕Щр╕лр╕ер╕▓р╕в р╣Ж migration р╕Хр╕▓р╕бр╣Гр╕Ир╣Ар╕лр╕бр╕▓р╕░

3. р╕гр╕▒р╕Щ

```bash
npx prisma migrate dev
```

> р╕Ър╕Щр╣Ар╕Лр╕┤р╕гр╣Мр╕Яр╣Ар╕зр╕нр╕гр╣М/Production р╣Гр╕лр╣Йр╣Гр╕Кр╣Й

```bash
npx prisma migrate deploy
```

---

## ЁЯзй Prisma Schema (р╣Гр╕лр╣Й Prisma р╕гр╕╣р╣Йр╕Ир╕▒р╕Бр╣Ар╕Йр╕Юр╕▓р╕░р╕Хр╕▓р╕гр╕▓р╕Зр╕лр╕ер╕▒р╕Б/р╕зр╕┤р╕з)

`prisma/schema.prisma`

```prisma
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id         Int      @id @default(autoincrement())
  email      String   @unique
  created_at DateTime @default(now())
  events     Event[]
}

model Event {
  id         BigInt   @id @default(autoincrement())
  user_id    Int
  amount     Decimal  @db.Decimal(12, 2)
  event_type String
  created_at DateTime @default(now())

  user User @relation(fields: [user_id], references: [id])
}
```

> р╕лр╕бр╕▓р╕вр╣Ар╕лр╕Хр╕╕
>
> * Prisma р╣Др╕бр╣Ир╕Ир╕│р╣Ар╕Ыр╣Зр╕Щр╕Хр╣Йр╕нр╕Зр╕гр╕╣р╣Йр╕Ир╕▒р╕Б **partitioned parent** р╣Бр╕вр╕Бр╕Хр╣Ир╕▓р╕Зр╕лр╕▓р╕Б р╕Цр╣Йр╕▓р╕Др╕╕р╕У query р╕Ьр╣Ир╕▓р╕Щр╕зр╕┤р╕зр╕лр╕гр╕╖р╕нр╕Ьр╣Ир╕▓р╕Щр╕Хр╕▓р╕гр╕▓р╕Зр╕лр╕ер╕▒р╕Бр╕Чр╕╡р╣Ир╕Ыр╕гр╕░р╕Бр╕▓р╕ир╣Др╕зр╣Йр╣Гр╕Щр╕кр╕Др╕╡р╕бр╕▓
> * р╕Цр╣Йр╕▓р╣Гр╕Кр╣Й **VIEW** р╕Бр╕▒р╕Ъ Prisma р╣Гр╕лр╣Йр╕Ыр╕гр╕░р╕Бр╕▓р╕ир╣Ар╕Ыр╣Зр╕Щ `@@ignore` р╣Гр╕Щр╣Вр╕бр╣Ар╕Фр╕е (р╕лр╕гр╕╖р╕нр╣Др╕бр╣Ир╕Ыр╕гр╕░р╕Бр╕▓р╕ир╣Гр╕Щр╕кр╕Др╕╡р╕бр╕▓) р╣Бр╕ер╣Йр╕зр╕нр╣Ир╕▓р╕Щр╕Фр╣Йр╕зр╕в `prisma.$queryRaw` р╣Бр╕Чр╕Щр╣Гр╕Щр╕Ър╕▓р╕Зр╣Ар╕Др╕кр╕Чр╕╡р╣И Prisma map р╣Др╕бр╣Ир╕Др╕гр╕Ъ

р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕Зр╕Бр╕▓р╕гр╣Гр╕Кр╣Й Client:

```ts
import { PrismaClient } from '@prisma/client'
const prisma = new PrismaClient()

async function main() {
  await prisma.user.create({
    data: { email: 'test@example.com' }
  })

  const daily = await prisma.$queryRawUnsafe(
    'SELECT * FROM daily_summary ORDER BY day DESC LIMIT 7'
  )
  console.log(daily)
}

main()
  .catch(console.error)
  .finally(() => prisma.$disconnect())
```

---

## ЁЯФБ Working Cycle р╕Чр╕╡р╣Ир╣Бр╕Щр╕░р╕Щр╕│

1. р╣Бр╕Бр╣Й SQL р╣Гр╕Щ `raw-sql` (01 тЖТ 02 тЖТ 03)
2. р╣Гр╕Кр╣Й `psql` р╕Чр╕Фр╕кр╕нр╕Ър╕Ър╕Щр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕З
3. р╕вр╣Йр╕▓р╕в SQL р╣Ар╕Вр╣Йр╕▓ `prisma/migrations/.../migration.sql`
4. `npx prisma migrate dev` (local) / `npx prisma migrate deploy` (prod)
5. `npx prisma generate` р╕Чр╕╕р╕Бр╕Др╕гр╕▒р╣Йр╕Зр╕Чр╕╡р╣Ир╣Бр╕Бр╣Й `schema.prisma`

---

## ЁЯза р╕Вр╣Йр╕нр╕Др╕зр╕гр╕гр╕░р╕зр╕▒р╕З & Tips

* р╣Гр╕Кр╣Й `IF NOT EXISTS` р╣Ар╕Юр╕╖р╣Ир╕н rerun р╣Др╕Фр╣Йр╕Ыр╕ер╕нр╕Фр╕ар╕▒р╕вр╕Вр╕╢р╣Йр╕Щ
* р╕Хр╕▒р╣Йр╕З **PRIMARY KEY** р╕Ър╕Щ parent partitioned table р╕Чр╕╡р╣Ир╕гр╕зр╕бр╕Др╕╡р╕вр╣Мр╕Кр╣Ир╕зр╕З (р╣Ар╕Кр╣Ир╕Щ `(id, created_at)`) р╣Ар╕Юр╕╖р╣Ир╕нр╕лр╕ер╕╡р╕Бр╣Ар╕ер╕╡р╣Ир╕вр╕З duplicate keys р╕Вр╣Йр╕▓р╕бр╕Юр╕▓р╕гр╣Мр╕Чр╕┤р╕Кр╕▒р╕Щ
* р╣Ар╕Вр╕╡р╕вр╕Щр╕кр╕Др╕гр╕┤р╕Ыр╕Хр╣Мр╕кр╕гр╣Йр╕▓р╕Зр╕Юр╕▓р╕гр╣Мр╕Чр╕┤р╕Кр╕▒р╕Щр╕ер╣Ир╕зр╕Зр╕лр╕Щр╣Йр╕▓ (р╕гр╕▓р╕вр╣Ар╕Фр╕╖р╕нр╕Щ/р╕гр╕▓р╕вр╕зр╕▒р╕Щ) р╣Бр╕ер╕░р╕Хр╕▒р╣Йр╕З cron р╕Цр╣Йр╕▓р╕Ир╕│р╣Ар╕Ыр╣Зр╕Щ
* р╕кр╕│р╕лр╕гр╕▒р╕Ъ Materialized View р╣Гр╕лр╣Йр╕Хр╕▒р╣Йр╕З `REFRESH MATERIALIZED VIEW CONCURRENTLY ...` р╕Хр╕▓р╕бр╕гр╕нр╕Ър╣Ар╕зр╕ер╕▓
* р╕нр╕вр╣Ир╕▓р╕ер╕╖р╕бр╕Фр╕▒р╕Кр╕Щр╕╡р╕Чр╕╡р╣Ир╕кр╕нр╕Фр╕Др╕ер╣Йр╕нр╕Зр╕Бр╕▒р╕Ър╕Др╕┤р╕зр╕гр╕╡р╕Ир╕гр╕┤р╕З р╣Вр╕Фр╕вр╣Ар╕Йр╕Юр╕▓р╕░р╕Др╕нр╕ер╕▒р╕бр╕Щр╣Мр╕Чр╕╡р╣Ир╣Гр╕Кр╣Йр╣Гр╕Щ `WHERE`/`JOIN`/`ORDER BY`

---

## ЁЯз╣ Rollback (р╕нр╕вр╣Ир╕▓р╕Зр╕вр╣Ир╕н)

```sql
DROP VIEW IF EXISTS monthly_summary;
DROP VIEW IF EXISTS daily_summary;

-- р╕гр╕░р╕зр╕▒р╕З: р╕ер╕Ъ partition р╕Бр╣Ир╕нр╕Щ р╕лр╕гр╕╖р╕нр╕ер╕Ъ parent р╕Юр╕гр╣Йр╕нр╕б CASCADE (р╕Вр╕╢р╣Йр╕Щр╕Бр╕▒р╕Ър╕Щр╣Вр╕вр╕Ър╕▓р╕в)
-- DROP TABLE IF EXISTS event_logs_2025_08;
-- DROP TABLE IF EXISTS event_logs CASCADE;  -- р╕Ир╕░р╕ер╕Ър╕ер╕╣р╕Бр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф

DROP TABLE IF EXISTS events;
DROP TABLE IF EXISTS users;
```

---

## ЁЯУЪ р╕нр╣Йр╕▓р╕Зр╕нр╕┤р╕Зр╕кр╕▒р╣Йр╕Щ р╣Ж

* Prisma Migrate vs db push: р╣Гр╕Кр╣Й **migrate** р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕кр╕Др╕╡р╕бр╕▓р╣Бр╕Ър╕Ър╕бр╕╡р╕Ыр╕гр╕░р╕зр╕▒р╕Хр╕┤ (Production-ready)
* Partitioning (Postgres): р╣Бр╕Щр╕░р╕Щр╕│р╣Гр╕лр╣Йр╕Юр╕▓р╕гр╣Мр╕Чр╕┤р╕Кр╕▒р╕Щр╕Хр╕▓р╕бр╕Др╕нр╕ер╕▒р╕бр╕Щр╣Мр╣Ар╕зр╕ер╕▓ + р╕Чр╕│р╕Фр╕▒р╕Кр╕Щр╕╡р╕Чр╕╡р╣Ир╣Ар╕лр╕бр╕▓р╕░р╕кр╕б

---

> р╣Ар╕кр╕гр╣Зр╕Ир╣Бр╕ер╣Йр╕з! р╕Др╕╕р╕Ур╕кр╕▓р╕бр╕▓р╕гр╕Цр╕Ыр╕гр╕▒р╕Ър╣Бр╕Бр╣Йр╕Кр╕╖р╣Ир╕нр╕Др╕нр╕ер╕▒р╕бр╕Щр╣М/р╕Фр╕▒р╕Кр╕Щр╕╡/р╕Юр╕▓р╕гр╣Мр╕Чр╕┤р╕Кр╕▒р╕Щр╣Гр╕лр╣Йр╕Хр╕гр╕Зр╕Бр╕▒р╕Ър╣Вр╕Фр╣Ар╕бр╕Щр╕Вр╕нр╕Зр╕гр╕░р╕Ър╕Ър╕Др╕╕р╕Ур╣Др╕Фр╣Йр╣Ар╕ер╕в тЬи

!(https://mikelopster.dev/posts/next-prisma/)







# Database Seeding

This directory contains the database seeding configuration for the CatCar Wash Service application.

## Seed File

The `seed.ts` file populates the database with:

1. **Permissions**: Creates the three permission types defined in the schema:
   - `ADMIN` - Full administrative access
   - `TECHNICIAN` - Technical staff access
   - `USER` - Regular user access

2. **SuperAdmin Employee**: Creates a default super administrator account with the following credentials:
   - **Email**: `superadmin@catcarwash.com`
   - **Password**: `SuperAdmin123!`
   - **Name**: Super Admin
   - **Permission**: ADMIN
   - **Status**: ACTIVE

## Running the Seed

You can run the seed in two ways:

### Method 1: Using npm script
```bash
npm run db:seed
```

### Method 2: Using Prisma CLI
```bash
npx prisma db seed
```

## Important Notes

- The seed uses `upsert` operations, so it's safe to run multiple times
- The SuperAdmin password is hashed using bcrypt with a salt rounds of 12
- Make sure to change the default SuperAdmin password after the first login
- The seed will create permissions if they don't exist, or update them if they do

## Security

тЪая╕П **Important**: The default SuperAdmin password (`SuperAdmin123!`) should be changed immediately after the first deployment to production.

## Running Prisma and Restarting TypeScript Server

To ensure your database and TypeScript server are up-to-date, follow these steps:

1. **Run Database Migrations:**
   - **Command:** `npx prisma migrate dev`
   - **Explanation:** р╕Др╕│р╕кр╕▒р╣Ир╕Зр╕Щр╕╡р╣Йр╣Гр╕Кр╣Йр╣Ар╕Юр╕╖р╣Ир╕нр╕кр╕гр╣Йр╕▓р╕Зр╣Бр╕ер╕░р╕Ыр╕гр╕▒р╕Ър╕Ыр╕гр╕╕р╕Зр╣Вр╕Др╕гр╕Зр╕кр╕гр╣Йр╕▓р╕Зр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Хр╕▓р╕бр╕Чр╕╡р╣Ир╕Бр╕│р╕лр╕Щр╕Фр╣Гр╕Щр╣Др╕Яр╕ер╣М `schema.prisma` р╣Вр╕Фр╕вр╕Ир╕░р╕кр╕гр╣Йр╕▓р╕Зр╕Хр╕▓р╕гр╕▓р╕Зр╕лр╕гр╕╖р╕нр╕Др╕нр╕ер╕▒р╕бр╕Щр╣Мр╣Гр╕лр╕бр╣Ир╕Хр╕▓р╕бр╕Чр╕╡р╣Ир╣Др╕Фр╣Йр╕Бр╕│р╕лр╕Щр╕Фр╣Др╕зр╣Й

2. **Generate Prisma Client:**
   - **Command:** `npx prisma generate`
   - **Explanation:** р╕Др╕│р╕кр╕▒р╣Ир╕Зр╕Щр╕╡р╣Йр╣Гр╕Кр╣Йр╣Ар╕Юр╕╖р╣Ир╕нр╕кр╕гр╣Йр╕▓р╕Зр╣Вр╕Др╣Йр╕Фр╣Др╕Др╕ер╣Ар╕нр╕Щр╕Хр╣Мр╕Вр╕нр╕З Prisma р╕Чр╕╡р╣Ир╕Ир╕░р╣Гр╕Кр╣Йр╣Гр╕Щр╕Бр╕▓р╕гр╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕нр╣Бр╕ер╕░р╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Гр╕Щр╣Вр╕Ыр╕гр╣Ар╕Ир╕Бр╕Хр╣Мр╕Вр╕нр╕Зр╕Др╕╕р╕У

3. **Seed the Database:**
   - **Command:** `npm run db:seed` р╕лр╕гр╕╖р╕н `npx prisma db seed`
   - **Explanation:** р╕Др╕│р╕кр╕▒р╣Ир╕Зр╕Щр╕╡р╣Йр╣Гр╕Кр╣Йр╣Ар╕Юр╕╖р╣Ир╕нр╣Ар╕Хр╕┤р╕бр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щр╕ер╕Зр╣Гр╕Щр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕е р╣Ар╕Кр╣Ир╕Щ р╕Бр╕▓р╕гр╕кр╕гр╣Йр╕▓р╕Зр╕Ър╕▒р╕Нр╕Кр╕╡р╕Ьр╕╣р╣Йр╕Фр╕╣р╣Бр╕ер╕гр╕░р╕Ър╕Ър╕лр╕гр╕╖р╕нр╕Бр╕▓р╕гр╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓р╕Бр╕▓р╕гр╕нр╕Щр╕╕р╕Нр╕▓р╕Хр╕Хр╣Ир╕▓р╕Зр╣Ж

4. **Restart TypeScript Server:**
   - **Command:** This step usually involves restarting your development environment or editor. In VSCode, you can do this by opening the command palette (Ctrl+Shift+P) and typing "TypeScript: Restart TS Server".

By following these steps, you ensure that your database is up-to-date and your TypeScript server is running with the latest changes.

## Database Requirements

Make sure your database is migrated and the Prisma client is generated before running the seed:

```bash
npx prisma migrate dev
npx prisma generate
```
